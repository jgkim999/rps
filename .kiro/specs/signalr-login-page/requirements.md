# 요구사항 문서

## 소개

이 문서는 .NET SignalR을 사용하여 100명이 함께 플레이할 수 있는 게임을 위한 Blazor 기반 로그인 페이지의 요구사항을 정의합니다. 사용자는 닉네임을 입력하여 SignalR 서버에 접속하고, 접속 상태를 확인할 수 있어야 합니다.

## 용어 정의

- **로그인 시스템(Login System)**: 사용자가 닉네임을 입력하여 SignalR 서버에 접속하는 시스템
- **SignalR Hub**: 실시간 통신을 처리하는 서버 측 엔드포인트 (/chathub)
- **사용자(User)**: 게임에 참여하기 위해 로그인하는 플레이어
- **연결(Connection)**: SignalR을 통한 클라이언트와 서버 간의 실시간 연결
- **Blazor 컴포넌트(Blazor Component)**: ASP.NET Core Razor Pages 프로젝트 내에서 사용되는 Blazor 컴포넌트
- **Redis 데이터베이스(Redis Database)**: 사용자 정보와 게임 통계를 저장하는 인메모리 데이터베이스
- **사용자 프로필(User Profile)**: Redis HashSet에 저장되는 사용자의 고유 ID, 닉네임, 게임 통계 정보
- **사용자 ID(User ID)**: Redis를 통해 발급되는 고유한 숫자 식별자
- **게임 통계(Game Statistics)**: 사용자의 승/패/무승부 횟수 및 가위/바위/보 선택 통계
- **로비(Lobby)**: 로그인 성공 후 사용자가 게임 시작 전에 머무르는 대기 공간
- **손모양 스킨(Hand Skin)**: 사용자가 선택할 수 있는 가위/바위/보 손모양의 시각적 스타일

## 요구사항

### 요구사항 1

**사용자 스토리:** 플레이어로서, 로그인 페이지에서 닉네임을 입력하여 선택한 아이덴티티로 게임 서버에 참여하고 싶습니다

#### 수락 기준

1. 로그인 시스템은 닉네임 입력을 위한 입력 필드를 표시해야 합니다
2. 로그인 시스템은 연결을 시작하기 위한 로그인 버튼을 표시해야 합니다
3. 사용자가 로그인 버튼을 클릭할 때, 로그인 시스템은 닉네임이 비어있지 않은지 검증해야 합니다
4. 닉네임이 유효할 때, 로그인 시스템은 /chathub 엔드포인트로 SignalR 연결을 수립해야 합니다
5. 연결이 성공했을 때, 로그인 시스템은 사용자 닉네임을 클라이언트 세션에 저장해야 합니다

### 요구사항 2

**사용자 스토리:** 플레이어로서, 연결 상태를 확인하여 게임 서버에 성공적으로 연결되었는지 알고 싶습니다

#### 수락 기준

1. 로그인 시스템은 연결 상태 표시기를 표시해야 합니다
2. SignalR 연결이 수립되었을 때, 로그인 시스템은 "연결됨" 상태 메시지를 표시해야 합니다
3. SignalR 연결이 실패했을 때, 로그인 시스템은 실패 이유와 함께 오류 메시지를 표시해야 합니다
4. 연결이 수립되는 동안, 로그인 시스템은 "연결 중..." 상태 메시지를 표시해야 합니다
5. 사용자의 연결이 끊어졌을 때, 로그인 시스템은 "연결 끊김" 상태 메시지를 표시해야 합니다

### 요구사항 3

**사용자 스토리:** 플레이어로서, 로그인 페이지가 Blazor 컴포넌트로 구현되어 현대적이고 인터랙티브한 사용자 인터페이스를 사용하고 싶습니다

#### 수락 기준

1. 로그인 시스템은 Razor 컴포넌트(.razor 파일)로 구현되어야 합니다
2. 로그인 시스템은 기존 ASP.NET Core Razor Pages 프로젝트 구조에 통합되어야 합니다
3. 로그인 시스템은 실시간 인터랙티비티를 위해 Blazor Server 렌더링 모드를 사용해야 합니다
4. 로그인 시스템은 Rps/Pages 디렉토리의 전용 라우트를 통해 접근 가능해야 합니다
5. 로그인 시스템은 연결 관리를 위해 기존 SignalR JavaScript 클라이언트 라이브러리를 활용해야 합니다

### 요구사항 4

**사용자 스토리:** 플레이어로서, 로그인 폼에 입력 검증이 있어 잘못된 데이터를 제출할 수 없기를 원합니다

#### 수락 기준

1. 닉네임 입력이 비어있을 때, 로그인 시스템은 로그인 버튼을 비활성화해야 합니다
2. 닉네임이 공백만 포함할 때, 로그인 시스템은 검증 오류 메시지를 표시해야 합니다
3. 로그인 시스템은 닉네임 길이를 최대 20자로 제한해야 합니다
4. 로그인 시스템은 닉네임 길이를 최소 2자로 제한해야 합니다
5. 검증이 실패했을 때, 로그인 시스템은 각 검증 규칙에 대한 구체적인 오류 메시지를 표시해야 합니다

### 요구사항 5

**사용자 스토리:** 플레이어로서, 사용자 정보가 Redis에 저장되어 세션 간에 게임 진행 상황이 유지되기를 원합니다

#### 수락 기준

1. 사용자가 닉네임으로 로그인할 때, 로그인 시스템은 Redis 데이터베이스에 사용자 프로필이 존재하는지 확인해야 합니다
2. 사용자 프로필이 존재하지 않으면, 로그인 시스템은 Redis increment 연산을 사용하여 고유한 사용자 ID를 생성해야 합니다
3. 새 사용자가 생성될 때, 로그인 시스템은 사용자 ID, 닉네임, 초기화된 게임 통계를 포함한 사용자 프로필을 Redis HashSet으로 저장해야 합니다
4. 로그인 시스템은 새 사용자 통계를 승리, 패배, 무승부, 바위 횟수, 보 횟수, 가위 횟수에 대해 0 값으로 초기화해야 합니다
5. 기존 사용자가 로그인할 때, 로그인 시스템은 닉네임을 조회 키로 사용하여 Redis 데이터베이스에서 사용자 프로필을 검색해야 합니다

### 요구사항 6

**사용자 스토리:** 플레이어로서, 로그인 성공 후 게임 통계를 확인하여 내 성과를 추적하고 싶습니다

#### 수락 기준

1. 로그인이 성공했을 때, 로그인 시스템은 Redis 데이터베이스에서 사용자의 게임 통계를 검색해야 합니다
2. 로그인 시스템은 승리, 패배, 무승부를 포함한 사용자 통계를 클라이언트에 전송해야 합니다
3. 로그인 시스템은 바위 횟수, 보 횟수, 가위 횟수를 포함한 사용자의 선택 통계를 전송해야 합니다
4. 로그인 시스템은 검색된 통계를 클라이언트 인터페이스에 표시해야 합니다
5. 통계 검색이 실패하면, 로그인 시스템은 기본 0 값을 표시하고 오류를 로깅해야 합니다

### 요구사항 7

**사용자 스토리:** 플레이어로서, 로그인 성공 후 로비로 이동하여 게임 시작 전 준비를 하고 싶습니다

#### 수락 기준

1. SignalR 연결이 성공적으로 수립되었을 때, 로그인 시스템은 로비 페이지로 이동해야 합니다
2. 로그인 시스템은 사용자 닉네임을 로비 페이지로 전달해야 합니다
3. 로그인 시스템은 사용자 ID를 로비 페이지로 전달해야 합니다
4. 로그인 중 연결이 실패하면, 로그인 시스템은 로그인 페이지에 남아 오류를 표시해야 합니다
5. 로그인 시스템은 페이지 새로고침 없이 연결을 재시도할 수 있는 방법을 제공해야 합니다

### 요구사항 8

**사용자 스토리:** 플레이어로서, 로비에서 2가지 손모양 스킨 중 하나를 선택하여 내 게임 캐릭터를 커스터마이징하고 싶습니다

#### 수락 기준

1. 로그인 시스템은 로비 페이지에 2가지 손모양 스킨 옵션을 표시해야 합니다
2. 로그인 시스템은 각 손모양 스킨의 미리보기 이미지를 표시해야 합니다
3. 사용자가 손모양 스킨을 선택할 때, 로그인 시스템은 선택된 스킨을 시각적으로 강조 표시해야 합니다
4. 로그인 시스템은 선택된 손모양 스킨 정보를 Redis 데이터베이스의 사용자 프로필에 저장해야 합니다
5. 사용자가 스킨을 선택한 후, 로그인 시스템은 게임 시작을 위한 준비 완료 버튼을 활성화해야 합니다
